#!/usr/bin/env python3
"""
–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ "–ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–≥–æ" —Ä–æ—É—Ç–µ—Ä–∞ Xiaomi
–ò—Å—Ç–æ—Ä–∏—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è network-scanner
"""

from network_scanner import NetworkScanner

def success_story():
    """–ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞: –∫–∞–∫ –Ω–∞—à–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä Xiaomi"""
    print("=" * 70)
    print("–ò–°–¢–û–†–ò–Ø –£–°–ü–ï–•–ê: –ö–ê–ö –ù–ê–®–õ–ò –ü–û–¢–ï–†–Ø–ù–ù–´–ô –†–û–£–¢–ï–† XIAOMI")
    print("=" * 70)
    
    print("\nüìñ –ü–†–ï–î–´–°–¢–û–†–ò–Ø:")
    print("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏–ª —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ Xiaomi –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –Ω–∞–∑–∞–¥")
    print("–∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–Ω–æ –∑–∞–±—ã–ª –µ–≥–æ. –†–æ—É—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–ª –≤ —Ä–µ–∂–∏–º–µ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä–∞.")
    
    print("\nüîß –ó–ê–î–ê–ß–ê:")
    print("–ù–∞–π—Ç–∏ IP-–∞–¥—Ä–µ—Å —Ä–æ—É—Ç–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏")
    
    print("\nüöÄ –†–ï–®–ï–ù–ò–ï:")
    print("–ë—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ network-scanner –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤")
    
    print("\nüîç –ü–†–û–¶–ï–°–° –ü–û–ò–°–ö–ê:")
    
    # –®–∞–≥ 1: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ç–∏
    print("\n1. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏ 192.168.1.0/24:")
    scanner1 = NetworkScanner(network="192.168.1.0/24")
    results1 = scanner1.scan_network()
    print(f"   –ù–∞–π–¥–µ–Ω–æ: {len(results1)} —É—Å—Ç—Ä–æ–π—Å—Ç–≤")
    print("   ‚Ä¢ pfSense –Ω–∞ 192.168.1.1")
    print("   ‚Ä¢ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ 192.168.1.6")
    
    # –®–∞–≥ 2: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å–µ—Ç–∏
    print("\n2. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏ 192.168.3.0/24:")
    scanner2 = NetworkScanner(network="192.168.3.0/24")
    results2 = scanner2.scan_network()
    print(f"   –ù–∞–π–¥–µ–Ω–æ: {len(results2)} —É—Å—Ç—Ä–æ–π—Å—Ç–≤")
    print("   ‚Ä¢ pfSense –Ω–∞ 192.168.3.1")
    print("   ‚Ä¢ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ 192.168.3.86")
    
    print("\nüéØ –†–ï–ó–£–õ–¨–¢–ê–¢:")
    print("–ù–∞ 192.168.3.86 –æ–±–Ω–∞—Ä—É–∂–µ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–∏—Ç–∞–π—Å–∫–∏–º–∏ –∏–µ—Ä–æ–≥–ª–∏—Ñ–∞–º–∏")
    print("–≠—Ç–æ –æ–∫–∞–∑–∞–ª—Å—è —Ä–æ—É—Ç–µ—Ä Xiaomi —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º 'Â∞èÁ±≥Ë∑ØÁî±Âô®'")
    
    print("\n‚úÖ –í–´–í–û–î:")
    print("–†–æ—É—Ç–µ—Ä —É—Å–ø–µ—à–Ω–æ –Ω–∞–π–¥–µ–Ω! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–≥ –∑–∞–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")
    print("–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –Ω–æ–≤—ã–º USB –∞–¥–∞–ø—Ç–µ—Ä–æ–º.")
    
    print("\n" + "=" * 70)
    print("network-scanner –¥–æ–∫–∞–∑–∞–ª —Å–≤–æ—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö!")
    print("=" * 70)

def practical_example():
    """–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"""
    print("\n\nüéØ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ô –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:")
    print("-" * 50)
    
    # –°–æ–∑–¥–∞–µ–º —Å–∫–∞–Ω–µ—Ä
    scanner = NetworkScanner(
        network="192.168.3.0/24",
        timeout=3,
        threads=30
    )
    
    # –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
    scanner.common_ports.extend([81, 82, 8001, 8081])
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    print("–ó–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏ 192.168.3.0/24...")
    results = scanner.scan_network()
    
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    routers = [r for r in results if r['is_router']]
    other_devices = [r for r in results if not r['is_router']]
    
    print(f"\nüìä –†–ï–ó–£–õ–¨–¢–ê–¢–´:")
    print(f"–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ: {len(results)} —É—Å—Ç—Ä–æ–π—Å—Ç–≤")
    print(f"–†–æ—É—Ç–µ—Ä—ã: {len(routers)}")
    print(f"–î—Ä—É–≥–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: {len(other_devices)}")
    
    if routers:
        print("\nüöÄ –ù–ê–ô–î–ï–ù–ù–´–ï –†–û–£–¢–ï–†–´:")
        for router in routers:
            print(f"  ‚Ä¢ {router['ip']}:{router['port']} - {router['title']}")
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    scanner.save_results()
    print("\nüíæ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ø–∞–ø–∫—É results/")

if __name__ == "__main__":
    success_story()
    practical_example()